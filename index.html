<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Orhun Ege Eker ‚Äî Interactive 3D Map</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
<style>
  :root{ --bg:#0c0c0e; --panel:#121215; --text:#f6f7fb; --muted:#aeb4c0; --border:#1f2126; --radius:20px; }
  *{ box-sizing:border-box }
  html,body{ height:100% }
  body{ margin:0; background:var(--bg); color:var(--text); font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif }
  a{ color:inherit; text-decoration:none }
  .container{ max-width:1180px; margin:0 auto; padding:0 20px }
  header{ position:sticky; top:0; z-index:5; background:rgba(12,12,14,.6); backdrop-filter:saturate(160%) blur(10px); border-bottom:1px solid var(--border) }
  nav{ display:flex; align-items:center; justify-content:space-between; height:64px }
  .brand{ font-weight:800; letter-spacing:.4px; font-size:16px }
  .navlinks{ display:flex; gap:20px; font-size:14px }
  .navlinks a{ opacity:.85; position:relative }
  .navlinks a:after{ content:""; position:absolute; left:0; right:0; bottom:-6px; height:2px; background:#2b2d33; transform:scaleX(0); transform-origin:left; transition:transform .25s ease }
  .navlinks a:hover{ opacity:1 }
  .navlinks a:hover:after{ transform:scaleX(1) }

  main{ padding:24px 0 }
  .hero{ padding:18px 0 8px }
  .sub{ font-size:14px; opacity:0.95; margin:0 0 6px }
  .desc{ color:var(--muted); font-size:14px; max-width:820px; }

  /* 3D Map panel */
  .map-wrap{
    margin-top:18px; border:1px solid var(--border); border-radius:20px; overflow:hidden;
    background:linear-gradient(180deg,#0b0e14 0%, #0a0c11 100%);
    height:78vh; min-height:540px; position:relative;
  }
  canvas.webgl{ display:block; width:100%; height:100% }
  .map-hint{
    position:absolute; left:12px; bottom:12px; z-index:2;
    font-size:12px; color:#cbd5e1; opacity:.85;
    background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.15);
    border-radius:999px; padding:6px 10px; backdrop-filter:blur(6px)
  }
  .tooltip{
    position:absolute; transform:translate(-50%,-120%); padding:6px 8px; font-size:12px;
    background:rgba(0,0,0,.55); color:#fff; border:1px solid rgba(255,255,255,.18); border-radius:8px;
    pointer-events:none; opacity:0; transition:opacity .15s ease; white-space:nowrap; z-index:3
  }

  footer{ border-top:1px solid var(--border); margin-top:24px }
  footer .inner{ padding:18px 0; color:#cbd5e1; font-size:14px; text-align:center }

  @media (prefers-reduced-motion: reduce){ .map-hint{display:none} }
</style>
</head>
<body>
  <header>
    <div class="container">
      <nav>
        <a class="brand" href="index.html">ORHUN EGE EKER</a>
        <div class="navlinks">
          <a href="index.html">WORK</a>
          <a href="about.html">ABOUT</a>
          <a href="contact.html">CONTACT</a>
        </div>
      </nav>
    </div>
  </header>

  <main class="container">
    <section class="hero">
      <p class="sub">Multidisciplinary Designer</p>
      <p class="desc">Steer the ship and explore projects as islands. Hover to highlight; click an island to open the project.</p>
    </section>

    <section class="map-wrap" id="map">
      <canvas class="webgl" id="scene"></canvas>
      <div class="tooltip" id="tooltip"></div>
      <div class="map-hint">üõ∂ Move your mouse / drag to steer ‚Äî Click an island</div>
    </section>
  </main>

  <footer>
    <div class="container inner">¬© <span id="y"></span> Orhun Ege Eker</div>
  </footer>

  <!-- Three.js CDN -->
  <script src="https://unpkg.com/three@0.160.0/build/three.min.js"></script>

  <script>
    document.getElementById('y').textContent = new Date().getFullYear();

    // ---------- THREE BASICS ----------
    const wrap = document.getElementById('map');
    const canvas = document.getElementById('scene');
    const tooltip = document.getElementById('tooltip');
    const renderer = new THREE.WebGLRenderer({ canvas, antialias:true, alpha:true });
    renderer.setPixelRatio(Math.min(2, window.devicePixelRatio||1));
    renderer.setSize(wrap.clientWidth, wrap.clientHeight);
    renderer.shadowMap.enabled = true;
    renderer.shadowMap.type = THREE.PCFSoftShadowMap;

    const scene = new THREE.Scene();
    scene.fog = new THREE.Fog(0x0a0d13, 60, 180);

    // Camera
    const camera = new THREE.PerspectiveCamera(55, wrap.clientWidth / wrap.clientHeight, 0.1, 500);
    camera.position.set(0, 28, 48);

    // Lights
    const hemi = new THREE.HemisphereLight(0xb9d5ff, 0x0a0d13, 0.6);
    scene.add(hemi);

    const dir = new THREE.DirectionalLight(0xffffff, 0.7);
    dir.position.set(40, 60, 20);
    dir.castShadow = true;
    dir.shadow.mapSize.set(1024,1024);
    dir.shadow.camera.near = 10;
    dir.shadow.camera.far = 160;
    dir.shadow.camera.left = -80;
    dir.shadow.camera.right = 80;
    dir.shadow.camera.top = 80;
    dir.shadow.camera.bottom = -80;
    scene.add(dir);

    // ---------- WATER PLANE (simple animated) ----------
    const waterGeo = new THREE.PlaneGeometry(400, 400, 120, 120);
    const waterMat = new THREE.MeshStandardMaterial({
      color: 0x0b1b2a, roughness: 0.9, metalness: 0.0, transparent:true, opacity:0.98
    });
    const water = new THREE.Mesh(waterGeo, waterMat);
    water.rotation.x = -Math.PI/2;
    water.receiveShadow = true;
    scene.add(water);

    // Wave function
    const basePos = waterGeo.attributes.position.array.slice();
    function animateWaves(t){
      const pos = waterGeo.attributes.position;
      for(let i=0;i<pos.count;i++){
        const ix = i*3, x = basePos[ix], y = basePos[ix+1];
        const w = Math.sin((x*0.05 + t*0.7)) * 0.35 + Math.cos((y*0.06 - t*0.5)) * 0.25;
        pos.array[ix+2] = basePos[ix+2] + w; // z as height before rotation
      }
      pos.needsUpdate = true;
      waterGeo.computeVertexNormals();
    }

    // ---------- ISLANDS ----------
    const PROJECTS = [
      { id:'p1', title:'Audio Reactive + Hand Tracked Visualizer' },
      { id:'p2', title:'Odin Pendant Animation' },
      { id:'p3', title:'MediaPipe + Ableton + PointCloud' },
      { id:'p4', title:'Nike Air Jordan CGI' },
      { id:'p5', title:'Bic Mini Lighter Spider Case' },
      { id:'p6', title:'Space Keycap Animation' },
      { id:'p7', title:'Oxidized Silver Jewelry ‚Äî Maverick' },
      { id:'p8', title:'YouTube Channel Intro' },
      { id:'p9', title:'AI Visualizer from Image' }
    ];

    // Adalarƒ± sahneye yerle≈ütirmek i√ßin koordinatlar (dairesel dizilim)
    const islandPositions = [
      [-28, -10], [-5, -18], [20, -8],
      [-25, 10],  [0, 12],   [26, 14],
      [-18, 28],  [7, 26],   [28, 30]
    ];

    const islands = [];
    const islandColor = new THREE.Color(0x445a3c);
    const highlightColor = new THREE.Color(0x8ad06f);

    function makeIsland(radius=3.2, height=2.8, segments=14){
      const geo = new THREE.CylinderGeometry(radius*0.7, radius, height, segments, 1, false);
      // tepeyi biraz p√ºt√ºrl√º yap
      const pos = geo.attributes.position;
      for(let i=0;i<pos.count;i++){
        const y = pos.getY(i);
        if(y > height*0.4){
          const n = (Math.random()-0.5)*0.6;
          pos.setY(i, y + n);
          pos.setX(i, pos.getX(i) + (Math.random()-0.5)*0.25);
          pos.setZ(i, pos.getZ(i) + (Math.random()-0.5)*0.25);
        }
      }
      geo.computeVertexNormals();
      const mat = new THREE.MeshStandardMaterial({ color:islandColor, roughness:0.95, metalness:0 });
      const m = new THREE.Mesh(geo, mat);
      m.castShadow = true; m.receiveShadow = true;
      return m;
    }

    PROJECTS.forEach((p, idx) => {
      const [x,z] = islandPositions[idx];
      const island = makeIsland( 3 + Math.random()*1.8, 2.6 + Math.random()*1.4, 16 );
      island.position.set(x, 1.3, z);
      island.userData.project = p;
      scene.add(island);
      islands.push(island);

      // k√º√ß√ºk ‚Äúkƒ±yƒ±‚Äù efekti: adanƒ±n etrafƒ±nda ≈üeffaf disk
      const ringGeo = new THREE.RingGeometry( island.geometry.parameters.radiusTop*0.9, island.geometry.parameters.radiusBottom*1.25, 48 );
      const ringMat = new THREE.MeshBasicMaterial({ color:0x9ad8ff, transparent:true, opacity:0.08, side:THREE.DoubleSide });
      const ring = new THREE.Mesh(ringGeo, ringMat);
      ring.rotation.x = -Math.PI/2;
      ring.position.set(x, 0.05, z);
      scene.add(ring);
      island.userData.ring = ring;
    });

    // ---------- SHIP (procedural) ----------
    const ship = new THREE.Group();

    // g√∂vde
    const hull = new THREE.Mesh(
      new THREE.CapsuleGeometry(1.1, 4.0, 6, 12),
      new THREE.MeshStandardMaterial({ color:0x6b4f3b, roughness:0.8 })
    );
    hull.rotation.z = Math.PI/2;
    hull.castShadow = true; hull.receiveShadow = true;
    ship.add(hull);

    // g√ºverte
    const deck = new THREE.Mesh(
      new THREE.BoxGeometry(2.2, 0.2, 1.2),
      new THREE.MeshStandardMaterial({ color:0x7b5a40, roughness:0.85 })
    );
    deck.position.set(0, 0.6, 0);
    deck.castShadow = true; deck.receiveShadow = true;
    ship.add(deck);

    // direk
    const mast = new THREE.Mesh(
      new THREE.CylinderGeometry(0.08, 0.08, 2.6, 8),
      new THREE.MeshStandardMaterial({ color:0xdad7cd, roughness:0.6 })
    );
    mast.position.set(0.2, 1.6, 0);
    ship.add(mast);

    // yelken
    const sail = new THREE.Mesh(
      new THREE.PlaneGeometry(1.8, 1.6, 6, 6),
      new THREE.MeshStandardMaterial({ color:0xffffff, roughness:0.7, side:THREE.DoubleSide })
    );
    sail.position.set(0.9, 1.6, 0);
    sail.rotation.y = Math.PI/2.2;
    ship.add(sail);

    ship.position.set(-34, 1.2, -24);
    scene.add(ship);

    // minik bow-wave (gemi √∂n√ºnde parƒ±ltƒ±)
    const bow = new THREE.Mesh(
      new THREE.ConeGeometry(0.22, 0.8, 12),
      new THREE.MeshBasicMaterial({ color:0x88e0ff, transparent:true, opacity:0.35 })
    );
    bow.rotation.x = Math.PI/2;
    bow.position.set(1.8, -0.2, 0);
    ship.add(bow);

    // ---------- INPUT / INTERACTION ----------
    const raycaster = new THREE.Raycaster();
    const pointer = new THREE.Vector2(0,0);
    let targetPoint = new THREE.Vector3(ship.position.x, 0, ship.position.z);
    let hovered = null;

    function onPointerMove(e){
      const rect = renderer.domElement.getBoundingClientRect();
      const x = ( (e.clientX - rect.left) / rect.width ) * 2 - 1;
      const y = - ( (e.clientY - rect.top) / rect.height ) * 2 + 1;
      pointer.set(x, y);

      // deniz d√ºzlemine raycast (y=0)
      const plane = new THREE.Plane(new THREE.Vector3(0,1,0), 0);
      const rOrig = new THREE.Vector3(), rDir = new THREE.Vector3();
      camera.getWorldDirection(rDir);
      raycaster.setFromCamera(pointer, camera);
      const hit = new THREE.Vector3();
      raycaster.ray.intersectPlane(plane, hit);
      if(hit){ targetPoint.copy(hit); }

      // ada hover
      raycaster.setFromCamera(pointer, camera);
      const hits = raycaster.intersectObjects(islands, false);
      if(hits.length){
        const obj = hits[0].object;
        if(hovered !== obj){
          if(hovered){ hovered.material.color.copy(islandColor); hovered.userData.ring.material.opacity = 0.08; }
          hovered = obj;
          hovered.material.color.copy(highlightColor);
          hovered.userData.ring.material.opacity = 0.16;
          // tooltip
          tooltip.textContent = obj.userData.project.title;
          tooltip.style.left = (e.clientX) + 'px';
          tooltip.style.top  = (e.clientY) + 'px';
          tooltip.style.opacity = 1;
        } else {
          tooltip.style.left = (e.clientX) + 'px';
          tooltip.style.top  = (e.clientY) + 'px';
        }
      } else {
        if(hovered){ hovered.material.color.copy(islandColor); hovered.userData.ring.material.opacity = 0.08; }
        hovered = null;
        tooltip.style.opacity = 0;
      }
    }
    function onClick(){
      if(hovered && hovered.userData.project){
        const pid = hovered.userData.project.id;
        // mevcut SPA mantƒ±ƒüƒ±na uygun: ?p=pid
        window.location.href = `index.html?p=${pid}`;
      }
    }
    renderer.domElement.addEventListener('pointermove', onPointerMove, { passive:true });
    renderer.domElement.addEventListener('click', onClick);

    // Touch: parmaƒüƒ± takip
    renderer.domElement.addEventListener('touchstart', e=>{
      if(e.touches && e.touches[0]){
        onPointerMove(e.touches[0]);
      }
    }, {passive:true});
    renderer.domElement.addEventListener('touchmove', e=>{
      if(e.touches && e.touches[0]){
        onPointerMove(e.touches[0]);
      }
    }, {passive:true});
    renderer.domElement.addEventListener('touchend', ()=>{ tooltip.style.opacity=0; }, {passive:true});

    // ---------- RESIZE ----------
    function onResize(){
      const w = wrap.clientWidth, h = wrap.clientHeight;
      renderer.setSize(w, h);
      camera.aspect = w / h;
      camera.updateProjectionMatrix();
    }
    window.addEventListener('resize', onResize);

    // ---------- LOOP ----------
    const clock = new THREE.Clock();
    function tick(){
      const t = clock.getElapsedTime();

      // su animasyonu
      animateWaves(t);

      // gemiyi hedefe s√ºr
      const to = new THREE.Vector3().subVectors(targetPoint, ship.position);
      to.y = 0;
      const dist = to.length();
      if(dist > 0.05){
        to.normalize();
        const speed = THREE.MathUtils.clamp( 0.06 + dist*0.005, 0.06, 0.25 );
        ship.position.addScaledVector(to, speed*2.0);
        // y√∂n√ºn√º hedefe √ßevir
        const desired = Math.atan2(to.x, to.z);
        ship.rotation.y = THREE.MathUtils.lerpAngle(ship.rotation.y, desired, 0.12);
        // hafif dalga √ºst√ºnde zƒ±plama
        ship.position.y = 1.2 + Math.sin(t*3.0)*0.15;
      } else {
        ship.position.y = 1.2 + Math.sin(t*2.2)*0.08;
      }

      // ada ‚Äúnefes‚Äù efekti (√ßok hafif)
      islands.forEach((m,i)=>{
        m.position.y = 1.3 + Math.sin(t*0.6 + i)*0.05;
      });

      renderer.render(scene, camera);
      requestAnimationFrame(tick);
    }
    tick();
  </script>
</body>
</html>
